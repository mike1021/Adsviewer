{"version":3,"sources":["../../../../client/app/account/signup/signup.controller.js"],"names":["SignupController","Auth","$location","form","submitted","$valid","createUser","name","user","email","password","then","path","catch","err","data","errors","angular","forEach","error","field","$setValidity","message","module","controller"],"mappings":"AAAA;;;;;;IAEMA,gB;AACJ;;AAEA,4BAAYC,IAAZ,EAAkBC,SAAlB,EAA6B;AAAA;;AACzB,SAAKD,IAAL,GAAYA,IAAZ;AACA,SAAKC,SAAL,GAAiBA,SAAjB;AACD;AACD;;;;;6BAGOC,I,EAAM;AAAA;;AACb,WAAKC,SAAL,GAAiB,IAAjB;;AAEA,UAAID,KAAKE,MAAT,EAAiB;AACf,aAAKJ,IAAL,CAAUK,UAAV,CAAqB;AACjBC,gBAAM,KAAKC,IAAL,CAAUD,IADC;AAEjBE,iBAAO,KAAKD,IAAL,CAAUC,KAFA;AAGjBC,oBAAU,KAAKF,IAAL,CAAUE;AAHH,SAArB,EAKGC,IALH,CAKQ,YAAM;AACV;AACA,gBAAKT,SAAL,CAAeU,IAAf,CAAoB,GAApB;AACD,SARH,EASGC,KATH,CASS,eAAO;AACZC,gBAAMA,IAAIC,IAAV;AACA,gBAAKC,MAAL,GAAc,EAAd;;AAEA;AACAC,kBAAQC,OAAR,CAAgBJ,IAAIE,MAApB,EAA4B,UAACG,KAAD,EAAQC,KAAR,EAAkB;AAC5CjB,iBAAKiB,KAAL,EAAYC,YAAZ,CAAyB,UAAzB,EAAqC,KAArC;AACA,kBAAKL,MAAL,CAAYI,KAAZ,IAAqBD,MAAMG,OAA3B;AACD,WAHD;AAID,SAlBH;AAmBD;AACF;;;;;;AAGHL,QAAQM,MAAR,CAAe,cAAf,EACGC,UADH,CACc,kBADd,EACkCxB,gBADlC","file":"signup.controller.js","sourcesContent":["'use strict';\n\nclass SignupController {\n  //end-non-standard\n\n  constructor(Auth, $location) {\n      this.Auth = Auth;\n      this.$location = $location;\n    }\n    //start-non-standard\n\n\n  register(form) {\n    this.submitted = true;\n\n    if (form.$valid) {\n      this.Auth.createUser({\n          name: this.user.name,\n          email: this.user.email,\n          password: this.user.password\n        })\n        .then(() => {\n          // Account created, redirect to home\n          this.$location.path('/');\n        })\n        .catch(err => {\n          err = err.data;\n          this.errors = {};\n\n          // Update validity of form fields that match the mongoose errors\n          angular.forEach(err.errors, (error, field) => {\n            form[field].$setValidity('mongoose', false);\n            this.errors[field] = error.message;\n          });\n        });\n    }\n  }\n}\n\nangular.module('adsviewerApp')\n  .controller('SignupController', SignupController);\n"]}