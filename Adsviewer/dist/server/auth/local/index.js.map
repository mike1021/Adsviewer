{"version":3,"sources":["../../../../server/auth/local/index.js"],"names":["express","require","passport","auth","router","Router","post","req","res","next","authenticate","err","user","info","error","status","json","message","token","signToken","_id","role","module","exports"],"mappings":"AAAA;;AAEA,IAAIA,UAAUC,QAAQ,SAAR,CAAd;AACA,IAAIC,WAAWD,QAAQ,UAAR,CAAf;AACA,IAAIE,OAAOF,QAAQ,iBAAR,CAAX;;AAEA,IAAIG,SAASJ,QAAQK,MAAR,EAAb;;AAEAD,OAAOE,IAAP,CAAY,GAAZ,EAAiB,UAASC,GAAT,EAAcC,GAAd,EAAmBC,IAAnB,EAAyB;AACxCP,WAASQ,YAAT,CAAsB,OAAtB,EAA+B,UAASC,GAAT,EAAcC,IAAd,EAAoBC,IAApB,EAA0B;AACvD,QAAIC,QAAQH,OAAOE,IAAnB;AACA,QAAIC,KAAJ,EAAW;AACT,aAAON,IAAIO,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBF,KAArB,CAAP;AACD;AACD,QAAI,CAACF,IAAL,EAAW;AACT,aAAOJ,IAAIO,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,EAACC,SAAS,yCAAV,EAArB,CAAP;AACD;;AAED,QAAIC,QAAQf,KAAKgB,SAAL,CAAeP,KAAKQ,GAApB,EAAyBR,KAAKS,IAA9B,CAAZ;AACAb,QAAIQ,IAAJ,CAAS,EAAEE,OAAOA,KAAT,EAAT;AACD,GAXD,EAWGX,GAXH,EAWQC,GAXR,EAWaC,IAXb;AAYD,CAbD;;AAeAa,OAAOC,OAAP,GAAiBnB,MAAjB","file":"index.js","sourcesContent":["'use strict';\n\nvar express = require('express');\nvar passport = require('passport');\nvar auth = require('../auth.service');\n\nvar router = express.Router();\n\nrouter.post('/', function(req, res, next) {\n  passport.authenticate('local', function(err, user, info) {\n    var error = err || info;\n    if (error) {\n      return res.status(401).json(error);\n    }\n    if (!user) {\n      return res.status(404).json({message: 'Something went wrong, please try again.'});\n    }\n\n    var token = auth.signToken(user._id, user.role);\n    res.json({ token: token });\n  })(req, res, next)\n});\n\nmodule.exports = router;\n"]}